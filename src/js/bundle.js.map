{"version":3,"file":"./bundle.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,IAAI,SAAS,IAAI;AAChC;AACA,kCAAkC,UAAU;AAC5C;AACA,6CAA6C,KAAK;AAClD;AACA,+CAA+C,OAAO;AACtD;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA,iCAAiC,OAAO;AACxC;AACA;AACA,kCAAkC,MAAM;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,cAAc;;;;;;;;;;;;;;ACjG7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,iEAAe,MAAM;;;;;;;;;;;;;;ACdN;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACrBoC;AACpC;AACe,wBAAwB,kDAAS;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS,SAAS,SAAS,uBAAuB,kBAAkB;AACpF,kCAAkC,eAAe;AACjD,wCAAwC,gBAAgB;AACxD;AACA,uCAAuC,iBAAiB;AACxD,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,iBAAiB,SAAS,SAAS,SAAS;AAC5C;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA,+CAA+C,UAAU;AACzD;AACA,iDAAiD,YAAY;AAC7D;AACA;AACA,qCAAqC,gBAAgB;AACrD;AACA,uCAAuC,QAAQ,aAAa,QAAQ;AACpE,0BAA0B,QAAQ;AAClC;AACA,uCAAuC,QAAQ,cAAc,QAAQ;AACrE,2BAA2B,QAAQ;AACnC;AACA,uCAAuC,QAAQ,WAAW,QAAQ;AAClE,wBAAwB,QAAQ;AAChC;AACA;AACA,sEAAsE,kBAAkB;AACxF;AACA,yCAAyC,WAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,WAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,MAAM;;;;;;UC7CrB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;ACNsC;AACA;AACqB;AACV;AACjD;AACA;AACA;AACA,CAAC,2DAAM;AACP,CAAC,2DAAM;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI,8DAAc;AAClB;AACA,KAAK;AACL,kEAAkE,OAAO;AACzE;AACA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,+JAA+J;AAC3K;AACA;AACA,yBAAyB,yEAAS;AAClC;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,CAAC,C","sources":["webpack://sass/./src/js/modules/cart-item.js","webpack://sass/./src/js/modules/header.js","webpack://sass/./src/js/modules/renderClasses/mainClass.js","webpack://sass/./src/js/modules/renderClasses/pizza-cart.js","webpack://sass/./src/js/modules/slider.js","webpack://sass/webpack/bootstrap","webpack://sass/webpack/runtime/define property getters","webpack://sass/webpack/runtime/hasOwnProperty shorthand","webpack://sass/webpack/runtime/make namespace object","webpack://sass/./src/js/script.js"],"sourcesContent":["function createCartItem(src, size, weight, price, count, dataId, alt, pizzaName) {\r\n\tconst cartItem = document.createElement('div');\r\n\tcartItem.classList.add('cart__item');\r\n\tcartItem.setAttribute('data-id', dataId);\r\n\r\n\tcartItem.innerHTML = `\r\n\t\t<div class=\"cart__item_info\">\r\n\t\t\t<img src=\"${src}\" alt=\"${alt}\" class=\"cart__item_img\">\r\n\t\t\t<div class=\"cart__item_text\">\r\n\t\t\t\t<p class=\"cart__item_title\">${pizzaName}</p>\r\n\t\t\t\t<p class=\"cart__item_description\">\r\n\t\t\t\t\t<span class=\"modal__description_size\">${size}</span>\r\n\t\t\t\t\t, традиционное тесто,\r\n\t\t\t\t\t<span class=\"modal__description_weight\">${weight}</span>\r\n\t\t\t\t\tг\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<p class=\"cart__item_close\">&times;</p>\r\n\t\t</div>\r\n\t\t<div class=\"cart__item_line\"></div>\r\n\t\t<div class=\"cart__item_control\">\r\n\t\t\t<p class=\"cart__item_price\">${price} руб.</p>\r\n\t\t\t<div class=\"cart__item_panel\">\r\n\t\t\t\t<button class=\"cart__item_minus cart__item_button\" type=\"button\">-</button>\r\n\t\t\t\t<p class=\"cart__item_count\">${count}</p>\r\n\t\t\t\t<button class=\"cart__item_plus cart__item_button\" type=\"button\">+</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"cart__item_delete\">\r\n\t\t\t<p class=\"cart__delete_text\">Хотите удалить из корзины?</p>\r\n\t\t\t<div class=\"cart__delete\">\r\n\t\t\t\t<button type=\"button\" class=\"cart__delete_yes cart__delete_button\">Да</button>\r\n\t\t\t\t<button type=\"button\" class=\"cart__delete_no cart__delete_button\">Нет</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t`\r\n\r\n\tdocument.querySelector('.cart__product').append(cartItem);\r\n\r\n\tconst\r\n\t\tcartItemCount = cartItem.querySelector('.cart__item_count'),\r\n\t\tcartItemPrice = cartItem.querySelector('.cart__item_price'),\r\n\t\tpriceOfOne = +cartItem.querySelector('.cart__item_price').innerHTML.slice(0, -5);\r\n\r\n\tcartItem.querySelector('.cart__item_plus').addEventListener('click', () => {\r\n\t\tcartItemCount.innerHTML++;\r\n\r\n\t\tcartCount++;\r\n\t\tupdateLocalStorage(pizzaName, size, weight, cartItemCount.innerHTML, (priceOfOne * cartItemCount.innerHTML).toFixed(2), src, dataId, alt);\r\n\t\trefreshCartitem(cartItemPrice, priceOfOne, cartItemCount);\r\n\r\n\r\n\t})\r\n\r\n\tcartItem.querySelector('.cart__item_minus').addEventListener('click', () => {\r\n\t\tif (+cartItemCount.innerHTML <= 1) {\r\n\t\t\tdeleteCartItem(cartItem, dataId, cartItemCount);\r\n\t\t} else {\r\n\t\t\tcartItemCount.innerHTML--;\r\n\t\t\tcartCount--;\r\n\t\t\trefreshCartitem(cartItemPrice, priceOfOne, cartItemCount);\r\n\r\n\t\t\tupdateLocalStorage(pizzaName, size, weight, cartItemCount.innerHTML, (priceOfOne * cartItemCount.innerHTML).toFixed(2), src, dataId, alt);\r\n\t\t}\r\n\t})\r\n\r\n\tcartItem.querySelector('.cart__item_close').addEventListener('click', () => {\r\n\t\tdeleteCartItem(cartItem, dataId, cartItemCount);\r\n\t})\r\n}\r\n\r\nfunction refreshCartitem(price, priceOfOne, count) {\r\n\tprice.innerHTML = ((priceOfOne * count.innerHTML).toFixed(2)) + ' руб.';\r\n\trefreshCartCount()\r\n\tcalculateTotalPrice();\r\n}\r\n\r\nfunction deleteCartItem(cartItem, dataId, currentCount) {\r\n\ttoggleCartItemDelete(cartItem, 1, 2);\r\n\r\n\tcartItem.querySelector('.cart__delete_yes').addEventListener('click', () => {\r\n\t\tcartItem.remove();\r\n\t\tcalculateTotalPrice();\r\n\t\tcartCount = cartCount - +currentCount.innerHTML;\r\n\t\trefreshCartCount()\r\n\t\tcartArray.splice(cartArray.indexOf(dataId), 1);\r\n\t})\r\n\tcartItem.querySelector('.cart__delete_no').addEventListener('click', () => {\r\n\t\ttoggleCartItemDelete(cartItem, 0, -2);\r\n\t})\r\n}\r\n\r\nfunction toggleCartItemDelete(cartItem, opacity, zIndex) {\r\n\tcartItem.querySelector('.cart__item_delete').style.opacity = opacity;\r\n\tcartItem.querySelector('.cart__item_delete').style.zIndex = zIndex;\r\n}\r\n\r\nexport default createCartItem;","const Header = () => {\r\n\tconst headerTop = document.querySelector('.header__top');\r\n\r\n\twindow.addEventListener('scroll', () => {\r\n\t\tif (scrollY > 80) {\r\n\t\t\theaderTop.style.marginTop = '-12rem';\r\n\t\t\tsetTimeout(() => headerTop.style.transition = '1s', 0)\r\n\t\t} else {\r\n\t\t\theaderTop.style.marginTop = '0px';\r\n\t\t\tsetTimeout(() => headerTop.style.transition = '1s', 0)\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport default Header;","export default class MainClass {\r\n\tconstructor(pizzaName, img, alt, price, ingridient, dataIngridient, smallImg, bigImg, smallPrice, bigPrice, size, smallSize, bigSize, weight, smallWeight, bigWeight, id, serialNumber) {\r\n\t\tthis.pizzaName = pizzaName;\r\n\t\tthis.img = img;\r\n\t\tthis.alt = alt;\r\n\t\tthis.price = price;\r\n\t\tthis.ingridient = ingridient;\r\n\t\tthis.dataIngridient = dataIngridient;\r\n\t\tthis.smallImg = smallImg;\r\n\t\tthis.bigImg = bigImg;\r\n\t\tthis.smallPrice = smallPrice;\r\n\t\tthis.bigPrice = bigPrice;\r\n\t\tthis.size = size;\r\n\t\tthis.smallSize = smallSize;\r\n\t\tthis.bigSize = bigSize;\r\n\t\tthis.weight = weight;\r\n\t\tthis.smallWeight = smallWeight;\r\n\t\tthis.bigWeight = bigWeight;\r\n\t\tthis.id = id;\r\n\t\tthis.serialNumber = serialNumber;\r\n\t}\r\n}","import MainClass from \"./mainClass\";\r\n\r\nexport default class PizzaCard extends MainClass {\r\n\tconstructor(...args) {\r\n\t\tsuper(...args);\r\n\t}\r\n\r\n\taddPizzaCard() {\r\n\t\tconst pizzaItem = document.createElement('div');\r\n\t\tpizzaItem.classList.add('pizza__item');\r\n\t\tpizzaItem.setAttribute('data-ingridient', this.dataIngridient);\r\n\t\tpizzaItem.setAttribute('data-id', this.id);\r\n\r\n\t\tpizzaItem.innerHTML = `\r\n\t\t\t\t<img src=\"${this.img}\" alt=\"${this.alt}\" data-serialNumber=\"${this.serialNumber}\" class=\"pizza__item_img\">\r\n\t\t\t\t<p class=\"pizza__item_name\">${this.pizzaName}</p>\r\n\t\t\t\t<p class=\"pizza__item_ingridient\">${this.ingridient}</p>\r\n\t\t\t\t<div class=\"pizza__item_control\">\r\n\t\t\t\t\t<p class=\"pizza__item_price\">от ${this.smallPrice} руб.</p>\r\n\t\t\t\t\t<button data-serialNumber=\"${this.serialNumber}\" class=\"pizza__item_btn\">Выбрать</button>\r\n\t\t\t\t</div>\r\n\t\t\t`;\r\n\r\n\t\tdocument.querySelector('.pizza__container').append(pizzaItem);\r\n\t}\r\n\r\n\tcreateModal() {\r\n\t\tconst\r\n\t\t\tmodal = document.querySelector('.modal'),\r\n\t\t\tmodalContent = document.createElement('div'),\r\n\t\t\tmodalDialog = document.querySelector('.modal__dialog');\r\n\r\n\t\tmodalContent.classList.add('modal__content');\r\n\t\tmodalContent.setAttribute('data-id', `${this.id}`);\r\n\r\n\t\tmodal.classList.remove('hide');\r\n\t\tmodal.classList.add('flexShow', 'fade');\r\n\r\n\t\tmodalDialog.innerHTML = '';\r\n\t\tmodalDialog.append(modalContent);\r\n\r\n\t\tdocument.body.style.overflow = 'hidden';\r\n\r\n\t\tmodalContent.innerHTML = `\r\n\t\t\t\t<div class=\"modal__close\">&times;</div>\r\n\t\t\t\t<div class=\"modal__pizza\">\r\n\t\t\t\t\t<img src=\"${this.img}\" alt=\"${this.alt}\" class=\"modal__pizza_img\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"modal__info\">\r\n\t\t\t\t\t<div class=\"modal__info_content\">\r\n\t\t\t\t\t\t<p class=\"modal__name\">${this.pizzaName}</p>\r\n\t\t\t\t\t\t<p class=\"modal__description\">\r\n\t\t\t\t\t\t\t<span class=\"modal__description_size\">${this.size}</span> \r\n\t\t\t\t\t\t\t, традиционное тесто, \r\n\t\t\t\t\t\t\t<span class=\"modal__description_weight\">${this.weight}</span> \r\n\t\t\t\t\t\t\tг\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p class=\"modal__ingridient\">${this.ingridient}</p>\r\n\t\t\t\t\t\t<div class=\"modal__switch\">\r\n\t\t\t\t\t\t\t<input type=\"radio\" name=\"size${this.id}\" id=\"small${this.id}\" class=\"modal__radio modal__radio_small\" value=\"small\">\r\n\t\t\t\t\t\t\t<label for=\"small${this.id}\" class=\"modal__label\">Маленькая</label>\r\n\r\n\t\t\t\t\t\t\t<input type=\"radio\" name=\"size${this.id}\" id=\"medium${this.id}\" class=\"modal__radio modal__radio_medium\" value=\"medium\" checked>\r\n\t\t\t\t\t\t\t<label for=\"medium${this.id}\" class=\"modal__label\">Средняя</label>\r\n\r\n\t\t\t\t\t\t\t<input type=\"radio\" name=\"size${this.id}\" id=\"big${this.id}\" class=\"modal__radio modal__radio_big\" value=\"big\">\r\n\t\t\t\t\t\t\t<label for=\"big${this.id}\" class=\"modal__label\">Большая</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button class=\"modal__button\" type=\"button\" data-serialNumber=\"${this.serialNumber}\">\r\n\t\t\t\t\tДобавить в корзину за \r\n\t\t\t\t\t<span class=\"modal__button_price\">${this.price}</span> \r\n\t\t\t\t\tруб.\r\n\t\t\t\t\t<span class=\"modal__button_flare\"></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t`;\r\n\r\n\t\tconst modalPizzaImg = modalContent.querySelector('.modal__pizza_img');\r\n\r\n\t\tdocument.addEventListener('keydown', (ev) => {\r\n\t\t\tif (ev.code == \"Escape\" && getComputedStyle(modal).display == 'flex') {\r\n\t\t\t\thideModal(modal);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tmodal.addEventListener('click', (ev) => {\r\n\t\t\tif (ev.target.classList.contains('modal__close') || ev.target == modal) {\r\n\t\t\t\thideModal(modal);\r\n\t\t\t}\r\n\r\n\t\t\tthis.switchPizza('modal__radio_small', this.smallImg, 0.8, modalPizzaImg, this.smallSize, this.smallWeight, this.smallPrice, ev)\r\n\r\n\t\t\tthis.switchPizza('modal__radio_medium', this.img, 1, modalPizzaImg, this.size, this.weight, this.price, ev)\r\n\r\n\t\t\tthis.switchPizza('modal__radio_big', this.bigImg, 1.2, modalPizzaImg, this.bigSize, this.bigWeight, this.bigPrice, ev)\r\n\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tswitchPizza(radioSelector, pizzaImg, scaleValue, modalPizzaImg, size, weight, price, ev) {\r\n\t\tif (ev.target.classList.contains(radioSelector)) {\r\n\t\t\tmodalPizzaImg.setAttribute('src', pizzaImg);\r\n\t\t\tmodalPizzaImg.style.transform = `scale(${scaleValue})`;\r\n\t\t\tdocument.querySelector('.modal__description_size').innerHTML = size;\r\n\t\t\tdocument.querySelector('.modal__description_weight').innerHTML = weight;\r\n\t\t\tdocument.querySelector('.modal__button_price').innerHTML = price;\r\n\t\t}\r\n\t}\r\n\r\n}","const Slider = () => {\r\n\tconst\r\n\t\tslides = document.querySelectorAll('.slider__item'),\r\n\t\tprevSlide = document.querySelector('.slider__prev'),\r\n\t\tnextSlide = document.querySelector('.slider__next');\r\n\tlet sliderIndex = 0;\r\n\r\n\tfunction hideSlides() {\r\n\t\tslides.forEach(el => {\r\n\t\t\tel.classList.add('hide');\r\n\t\t\tel.classList.remove('show', 'fade');\r\n\t\t})\r\n\t}\r\n\r\n\tfunction showSlide(i = sliderIndex) {\r\n\t\tslides[i].classList.add('show', 'fade');\r\n\t\tslides[i].classList.remove('hide');\r\n\t}\r\n\r\n\tfunction switchActiveSlide() {\r\n\t\thideSlides();\r\n\t\tshowSlide(sliderIndex);\r\n\t}\r\n\r\n\tnextSlide.addEventListener('click', () => {\r\n\t\tsliderIndex++;\r\n\t\tif (sliderIndex == (slides.length)) {\r\n\t\t\tsliderIndex = 0;\r\n\t\t}\r\n\t\tswitchActiveSlide()\r\n\t})\r\n\r\n\tprevSlide.addEventListener('click', () => {\r\n\t\tsliderIndex--;\r\n\t\tif (sliderIndex == -1) {\r\n\t\t\tsliderIndex = slides.length - 1;\r\n\t\t}\r\n\t\tswitchActiveSlide()\r\n\t})\r\n\r\n\thideSlides();\r\n\tshowSlide();\r\n\r\n}\r\n\r\nexport default Slider;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import Header from \"./modules/header\";\r\nimport Slider from \"./modules/slider\";\r\nimport PizzaCard from \"./modules/renderClasses/pizza-cart\";\r\nimport createCartItem from \"./modules/cart-item\";\r\n\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n\r\n\tHeader();\r\n\tSlider();\r\n\r\n\tlet\r\n\t\tcartCount = 0,\r\n\t\tpriceArr = [],\r\n\t\tarrOfId = [];\r\n\tconst\r\n\t\tcartArray = [];\r\n\r\n\tif (JSON.parse(localStorage.getItem('arrOfId')) && JSON.parse(localStorage.getItem('arrOfId')).length != 0) {\r\n\t\tarrOfId = JSON.parse(localStorage.getItem('arrOfId'));\r\n\t}\r\n\r\n\r\n\tfunction hideModal(modalSelector) {\r\n\t\tmodalSelector.classList.remove('flexShow', 'fade');\r\n\t\tmodalSelector.classList.add('hide');\r\n\t\tdocument.body.style.overflow = '';\r\n\t}\r\n\r\n\r\n\tconst checkNotEmpty = (obj) => {\r\n\t\tconst vals = Object.keys(obj).map(key => obj[key]);\r\n\t\tif (vals.some(el => el == \"\") || vals.some(el => el == null) || vals.some(el => el == undefined)) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction callCreateModal(clickTrigger, data) {\r\n\t\tdocument.querySelectorAll(clickTrigger).forEach(el => {\r\n\t\t\tel.addEventListener('click', ev => {\r\n\r\n\t\t\t\tdata[ev.target.getAttribute('data-serialNumber')].createModal();\r\n\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tdocument.querySelector('.modal').addEventListener('click', ev => {\r\n\t\tif (ev.target.classList.contains('modal__button') || ev.target.classList.contains('modal__button_price') || ev.target.classList.contains('modal__button_flare')) {\r\n\r\n\t\t\tconst\r\n\t\t\t\tcurrentSize = document.querySelector('.modal__description_size').innerHTML,\r\n\t\t\t\tcurrentWeight = document.querySelector('.modal__description_weight').innerHTML,\r\n\t\t\t\tcurrentSrc = document.querySelector('.modal__pizza_img').getAttribute('src'),\r\n\t\t\t\tcurrentAlt = document.querySelector('.modal__pizza_img').getAttribute('alt'),\r\n\t\t\t\tcurrentPrice = document.querySelector('.modal__button_price').innerHTML,\r\n\t\t\t\tserialNumber = ev.currentTarget.getAttribute('data-serialNumber'),\r\n\t\t\t\tcurrentTitle = document.querySelector('.modal__name').innerHTML;\r\n\t\t\tlet\r\n\t\t\t\tdataId;\r\n\r\n\t\t\tdocument.querySelectorAll('.modal__radio').forEach(el => {\r\n\t\t\t\tif (el.checked) {\r\n\t\t\t\t\tdataId = el.getAttribute('id');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tif (!(cartArray.includes(dataId))) {\r\n\r\n\t\t\t\tcartArray.push(dataId);\r\n\r\n\t\t\t\tcreateCartItem(currentSrc, currentSize, currentWeight, currentPrice, 1, dataId, currentAlt, currentTitle);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tconst currentItemCount = document.querySelector(`[data-id = ${dataId}] .cart__item_count`);\r\n\r\n\t\t\t\tif (currentItemCount) {\r\n\r\n\t\t\t\t\tcurrentItemCount.innerHTML++;\r\n\t\t\t\t\tdocument.querySelector(`[data-id = ${dataId}] .cart__item_price`).innerHTML = ((currentPrice * currentItemCount.innerHTML).toFixed(2)) + ' руб.';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcalculateTotalPrice();\r\n\t\t\tcartCount++;\r\n\t\t\trefreshCartCount();\r\n\t\t\tsetTimeout(() => hideModal(document.querySelector('.modal')), 100)\r\n\t\t}\r\n\t})\r\n\r\n\r\n\tfunction calculateTotalPrice() {\r\n\t\tdocument.querySelectorAll('.cart__item_price').forEach(el => {\r\n\t\t\tel = +el.innerHTML.slice(0, -5);\r\n\t\t\tpriceArr.push(el);\r\n\t\t})\r\n\t\tdocument.querySelectorAll('.total-price').forEach(el => {\r\n\t\t\tel.innerHTML = priceArr.reduce((sum, current) => sum + current, 0).toFixed(2) + ' руб.';\r\n\t\t})\r\n\t\tpriceArr = [];\r\n\t}\r\n\r\n\tfunction refreshCartCount() {\r\n\t\tdocument.querySelectorAll('.cart-count').forEach(el => {\r\n\t\t\tel.innerHTML = cartCount;\r\n\t\t})\r\n\t}\r\n\r\n\tfetch('db.json')\r\n\t\t.then((response) => response.json())\r\n\t\t.then((data) => {\r\n\r\n\t\t\tconst pizzaArray = [];\r\n\t\t\tlet serialNumber = 0;\r\n\r\n\t\t\tdata.pizza.forEach(elem => {\r\n\r\n\t\t\t\tconst { pizzaName, img, alt, price, ingridient, dataIngridient, smallImg, bigImg, smallPrice, bigPrice, size, smallSize, bigSize, weight, smallWeight, bigWeight, id } = elem;\r\n\r\n\t\t\t\tif (checkNotEmpty(elem)) {\r\n\t\t\t\t\tpizzaArray.push(new PizzaCard(pizzaName, img, alt, price, ingridient, dataIngridient, smallImg, bigImg, smallPrice, bigPrice, size, smallSize, bigSize, weight, smallWeight, bigWeight, id, serialNumber))\r\n\t\t\t\t}\r\n\r\n\t\t\t\t++serialNumber;\r\n\r\n\t\t\t})\r\n\r\n\t\t\tpizzaArray.forEach(el => el.addPizzaCard())\r\n\r\n\t\t\treturn pizzaArray;\r\n\r\n\t\t})\r\n\t\t.then((data) => {\r\n\t\t\tcallCreateModal('.pizza__item_btn', data);\r\n\t\t\tcallCreateModal('.pizza__item_img', data);\r\n\t\t});\r\n\r\n\r\n\tconst\r\n\t\tcart = document.querySelector('.cart'),\r\n\t\tcartContainer = document.querySelector('.cart__container'),\r\n\t\tcartButton = document.querySelectorAll('.cart-button');\r\n\r\n\tcartButton.forEach(el => {\r\n\t\tel.addEventListener('click', () => {\r\n\t\t\tcart.classList.add('flexShow', 'fade');\r\n\t\t\tcart.classList.remove('hide');\r\n\t\t\tcart.style.height = '100vh';\r\n\t\t\tdocument.body.style.overflow = 'hidden';\r\n\t\t\tsetTimeout(() => cartContainer.style.transform = 'translate(0rem)', 100);\r\n\t\t})\r\n\t})\r\n\r\n\tfunction callCartClose() {\r\n\t\tcartContainer.style.transform = 'translate(45rem)'\r\n\t\tcart.classList.add('hide');\r\n\t\tcart.classList.remove('flexShow', 'fade');\r\n\t\tdocument.body.style.overflow = '';\r\n\t}\r\n\r\n\tcart.addEventListener('click', ev => {\r\n\t\tif (ev.target.classList.contains('cart__close') || ev.target == cart) {\r\n\t\t\tcallCartClose()\r\n\t\t}\r\n\t})\r\n\r\n\tdocument.addEventListener('keydown', (ev) => {\r\n\t\tif (ev.code == \"Escape\" && getComputedStyle(cart).display == 'flex') {\r\n\t\t\tcallCartClose();\r\n\t\t}\r\n\t});\r\n\r\n})"],"names":[],"sourceRoot":""}